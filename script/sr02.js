/**
 * COnversor auto-ajuda
 * @version v1.0
 * @date 10/02/2023
 */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var _=0;_<t.length;_++){var s=t[_];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,_,s){return _&&e(t.prototype,_),s&&e(t,s),t}}(),CrispHelpdeskCommon=new(function(){function e(){_classCallCheck(this,e),this.__search_debounce_delay=100,this.__search_report_delay=1e3,this.__copy_state_confirm_delay=2e3,this.__suggest_min_length=2,this.__key_bindings={tabular:9,enter:13,escape:27,up:38,down:40},this.__selectors={},this.__is_language_menu_open=!1,this.__is_pending_search=!1,this.__active_search_query=null,this.__active_search_results=null,this.__search_debounce_timeout=null,this.__search_report_timeout=null,this.__do_show_status_banner=!sessionStorage||!sessionStorage.getItem||"0"!==sessionStorage.getItem("status-banner"),this.__initialize()}return _createClass(e,[{key:"bind",value:function(){this.__toggle_status_banner()}},{key:"hide_status_banner",value:function(){this.__do_show_status_banner=!1,this.__toggle_status_banner(),sessionStorage&&sessionStorage.setItem&&sessionStorage.setItem("status-banner","0")}},{key:"key_global",value:function(e){var t=!0;switch(e.keyCode){case this.__key_bindings.enter:t=this.__select_active_search_result();break;case this.__key_bindings.up:t=this.__move_active_search_result(-1);break;case this.__key_bindings.down:t=this.__move_active_search_result(1)}return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},{key:"click_global",value:function(e){var t=!0;return this.__check_hide_language(e),t}},{key:"resize_global",value:function(){this.__reset_suggest_active()}},{key:"toggle_language",value:function(){this.__is_language_menu_open=!this.__is_language_menu_open,this._apply_attribute_cache("language",".csh-header-main-actions-locale","expanded",this.__is_language_menu_open)}},{key:"toggle_search_focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._apply_attribute_cache("search",".csh-header-search","has-focus",e)}},{key:"key_search_field",value:function(e){var t=!0;switch(e.keyCode){case this.__key_bindings.tabular:t=this.__expand_suggest();break;case this.__key_bindings.escape:t=this.__reset_search_active();break;default:e.shiftKey!==!0&&e.metaKey!==!0&&e.ctrlKey!==!0&&e.altKey!==!0&&this.__reset_suggest_active()}return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},{key:"type_search_field",value:function(e){var t=this,_=(e.value||"").trim();_!==(this.__active_search_query||"")&&(this.__clear_search_timeout(),_&&this.__change_pending_search(!0),this.__search_debounce_timeout=setTimeout(function(){t.__active_search_query=_,_?(t.__proceed_suggest(_),t.__proceed_search(_)):(t.__reset_suggest(),t.__reset_search(!1))},_?this.__search_debounce_delay:0))}},{key:"search_search_field",value:function(e){this.type_search_field(e)}},{key:"mouse_search_result",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.__set_active_search_result("mouse",e,t)}},{key:"copy_code_clipboard",value:function(e){var t=e.parentElement||null;if(null!==t){var _=(t.getElementsByTagName("code")||[])[0]||null;if(null!==_){var s=this.__copy_text(_);s===!0&&(e.__copy_timeout&&clearTimeout(e.__copy_timeout),t.setAttribute("data-copied","true"),e.__copy_timeout=setTimeout(function(){delete e.__copy_timeout,t.setAttribute("data-copied","false")},this.__copy_state_confirm_delay))}}}},{key:"open_chatbox",value:function(){window.$crisp.push(["do","chat:show"]),window.$crisp.push(["do","chat:open"])}},{key:"go_to_anchor",value:function(e){e.id&&(window.location.hash="#"+e.id)}},{key:"_select_element_cache",value:function(e,t){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.__selectors[e]=(_===!0?null:this.__selectors[e])||document[s===!0?"querySelector":"querySelectorAll"](t),this.__selectors[e]}},{key:"_apply_attribute_cache",value:function(e,t,_,s){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=[];if(n===!0){var r=this._select_element_cache(e,t,a,!0);r&&i.push(r)}else i=this._select_element_cache(e,t,a,!1);if(i.length>0)for(var c="data-"+_,l=s===!0?"true":"false",u=0;u<i.length;u++)i[u].setAttribute(c,l)}},{key:"_load_include",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a="";if(null!==t)for(var n in t)a&&(a+="&"),a+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]);a&&(a="?"+a);var i=new XMLHttpRequest;i.open("GET",""+e+a),i.responseType="document",i.onload=function(){200===this.status?"function"==typeof _&&_(this.response):"function"==typeof s&&s()},i.onerror=function(){"function"==typeof s&&s()},i.send()}},{key:"_submit_payload",value:function(e,t,_,s,a){var n=new XMLHttpRequest,i=_?JSON.stringify(_):null;n.open(e,t,!0),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?"function"==typeof s&&s(n):"function"==typeof a&&a(n))},n.setRequestHeader("Content-Type","application/json"),n.send(i)}},{key:"__initialize",value:function(){window.onresize=this.resize_global.bind(this),document.onkeydown=this.key_global.bind(this),document.onclick=this.click_global.bind(this)}},{key:"__toggle_status_banner",value:function(){var e=document.querySelector("mark");e&&(e.style.display=this.__do_show_status_banner===!0?"block":"none")}},{key:"__clear_search_timeout",value:function(){null!==this.__search_debounce_timeout&&(clearTimeout(this.__search_debounce_timeout),this.__search_debounce_timeout=null),null!==this.__search_report_timeout&&(clearTimeout(this.__search_report_timeout),this.__search_report_timeout=null)}},{key:"__change_pending_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.__is_pending_search!==e&&(this.__is_pending_search=e,this._apply_attribute_cache("search",".csh-header-search","pending",this.__is_pending_search))}},{key:"__set_active_search_result",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,_=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._apply_attribute_cache("search_result",".csh-include-search-result","active",!1,!0,!1),null!==t&&(t.setAttribute("data-active",_===!0?"true":"false"),"keyboard"===e&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))}},{key:"__select_active_search_result",value:function(){if(null!==this.__active_search_results){var e=this.__active_search_results.querySelector(".csh-include-search-result[data-active='true']");if(e)return e.click(),!1}return!0}},{key:"__move_active_search_result",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(null!==this.__active_search_results){var t=this.__active_search_results.querySelectorAll(".csh-include-search-result");if((t||[]).length>0){for(var _=-1,s=0;s<t.length;s++)if("true"===t[s].getAttribute("data-active")){_=s;break}if(_+=e,_<0?_=t.length-1:_>=t.length&&(_=0),_>-1)return this.__set_active_search_result("keyboard",t[_],!0),!1}}return!0}},{key:"__expand_suggest",value:function(){if(null!==this.__active_search_results){var e=this._select_element_cache("autocomplete",".csh-header-search-field-autocomplete"),t=(e.innerText||"").trim();if(t){var _=this.__select_search_field();_.value=""+(_.value||"")+t,this.__reset_suggest()}return!1}return!0}},{key:"__reset_search",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.__clear_search_timeout(),this.__active_search_query=null,this.__active_search_results=null,this.__change_pending_search(!1),this._apply_attribute_cache("search",".csh-header-search","expanded",!1),e===!0){var t=this.__select_search_field();t.value=""}}},{key:"__reset_search_active",value:function(){return null===this.__active_search_results||(this.__reset_suggest(),this.__reset_search(!0),!1)}},{key:"__reset_suggest",value:function(){var e=this._select_element_cache("autocomplete",".csh-header-search-field-autocomplete");e.style.display="none",e.innerText=""}},{key:"__reset_suggest_active",value:function(){null!==this.__active_search_results&&this.__reset_suggest()}},{key:"__check_hide_language",value:function(e){if(this.__is_language_menu_open===!0){var t=e.path||("function"==typeof e.composedPath?e.composedPath():[]);if(t&&t.length>0){for(var _=this._select_element_cache("language",".csh-header-main-actions-locale"),s=!1,a=0;a<t.length;a++)if(t[a]===_){s=!0;break}s===!1&&this.toggle_language()}}}},{key:"__proceed_search",value:function(e){var t=this,_=this._select_element_cache("search",".csh-header-search");this._load_include(_.getAttribute("action"),{query:e},function(_){if(e===t.__active_search_query){t.__change_pending_search(!1);var s=_.getElementsByClassName("csh-include-search");if((s||[])[0]){var a=t._select_element_cache("search_results",".csh-header-search-results");for(t.__active_search_results=s[0];a.firstChild;)a.removeChild(a.firstChild);a.appendChild(s[0]),t._apply_attribute_cache("search",".csh-header-search","expanded",!0)}t.__search_report_timeout=setTimeout(function(){e===t.__active_search_query&&t.__proceed_report(e)},t.__search_report_delay)}},function(){e===t.__active_search_query&&t.__reset_search(!1)})}},{key:"__proceed_suggest",value:function(e){var t=this,_=this._select_element_cache("search",".csh-header-search"),s=e.substring(e.lastIndexOf(" ")+1).trim();s&&s.length>=this.__suggest_min_length&&this._load_include(_.getAttribute("data-target-suggest"),{part:s},function(e){var _=e.getElementsByClassName("csh-include-suggest"),s=[];(_||[])[0]&&s.push(_[0].innerText);var a=(s[0]||"").toLowerCase(),n=null,i=null;if(a){var r=t.__select_search_field();i=r.value||"";var c=i.substring(i.lastIndexOf(" ")+1).trim().toLowerCase();c&&c.length<a.length&&a.substring(0,c.length)===c&&(n=a.substring(c.length))}if(n&&i){var l=t._select_element_cache("ruler_text",".csh-header-search-field-ruler-text");l.innerText=i;var u=t._select_element_cache("autocomplete",".csh-header-search-field-autocomplete");if(u.innerText=n,u.style.display="inline-block","rtl"===document.dir?u.style.left=l.offsetLeft-u.offsetWidth+"px":u.style.left=l.offsetLeft+l.offsetWidth+"px","function"==typeof window.getComputedStyle){var o=window.getComputedStyle(l.parentElement,null);if("rtl"===document.dir)u.offsetLeft<=parseInt(o.paddingLeft,10)&&t.__reset_suggest();else{var h=u.clientWidth+(u.offsetLeft-parseInt(o.paddingLeft,10));h>=parseInt(o.width,10)&&t.__reset_suggest()}}}else t.__reset_suggest()})}},{key:"__proceed_report",value:function(e){var t=this._select_element_cache("search",".csh-header-search");this._submit_payload("POST",t.getAttribute("data-target-report"),{query:e})}},{key:"__select_search_field",value:function(){return this._select_element_cache("search_field","input[name='search_query']")}},{key:"__copy_text",value:function(e){var t=!1;try{var _=document.createRange();_.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(_),document.execCommand("copy"),window.getSelection().removeAllRanges(),t=!0}catch(e){}return t}}]),e}());window.onload=function(){CrispHelpdeskCommon.bind()};